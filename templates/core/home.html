{% extends 'base.html' %}

{% block title %}CompileMate - Gamified Competitive Programming Platform{% endblock %}

{% block content %}
<!-- Animated SVG Background -->
<div class="relative overflow-hidden bg-gradient-to-br from-primary-600 via-primary-700 to-primary-800">
    <svg class="absolute left-0 top-0 w-full h-full opacity-30 animate-pulse" viewBox="0 0 1440 320"><path fill="#fff" fill-opacity="0.2" d="M0,160L60,170.7C120,181,240,203,360,197.3C480,192,600,160,720,133.3C840,107,960,85,1080,101.3C1200,117,1320,171,1380,197.3L1440,224L1440,0L1380,0C1320,0,1200,0,1080,0C960,0,840,0,720,0C600,0,480,0,360,0C240,0,120,0,60,0L0,0Z"></path></svg>
    <div class="absolute inset-0 bg-black opacity-20"></div>
    <div class="relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-32 flex flex-col items-center justify-center min-h-[60vh]">
        <h1 class="text-5xl md:text-7xl font-extrabold text-white mb-6 animate-fade-in-up">
            Master Coding with <span class="text-yellow-300 animate-pulse">MateCoins</span>
        </h1>
        <p class="text-2xl md:text-3xl text-primary-100 mb-10 max-w-2xl mx-auto animate-fade-in-up delay-200">
            Solve competitive programming problems, earn real rewards, and level up your skills with our gamified platform.
        </p>
        <div class="flex flex-col sm:flex-row gap-4 justify-center animate-fade-in-up delay-300">
            {% if user.is_authenticated %}
                <a href="{% url 'problems:problem_list' %}" class="bg-white text-primary-600 hover:bg-gray-100 px-10 py-4 rounded-xl font-bold text-xl shadow-lg hover:scale-105 transition-all duration-200">
                    Start Solving
                </a>
                <a href="{% url 'core:dashboard' %}" class="border-2 border-white text-white hover:bg-white hover:text-primary-600 px-10 py-4 rounded-xl font-bold text-xl shadow-lg hover:scale-105 transition-all duration-200">
                    View Dashboard
                </a>
            {% else %}
                <a href="{% url 'account_signup' %}" class="bg-white text-primary-600 hover:bg-gray-100 px-10 py-4 rounded-xl font-bold text-xl shadow-lg hover:scale-105 transition-all duration-200">
                    Get Started Free
                </a>
                <a href="{% url 'account_login' %}" class="border-2 border-white text-white hover:bg-white hover:text-primary-600 px-10 py-4 rounded-xl font-bold text-xl shadow-lg hover:scale-105 transition-all duration-200">
                    Sign In
                </a>
            {% endif %}
        </div>
        <!-- Animated Floating Icons -->
        <div class="absolute top-24 left-16 animate-float-slow text-5xl">🚀</div>
        <div class="absolute top-40 right-24 animate-float-fast text-4xl">💡</div>
        <div class="absolute bottom-24 left-32 animate-float-medium text-4xl">🏆</div>
        <div class="absolute bottom-32 right-16 animate-float-slow text-5xl">🧑‍💻</div>
    </div>
</div>

<!-- Parallax Stats Section -->
<div class="bg-white dark:bg-gray-800 py-20 animate-fade-in-up delay-500">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="grid grid-cols-2 md:grid-cols-5 gap-8 text-center">
            <div class="transition-transform duration-300 hover:scale-110">
                <div class="stat-animate text-4xl font-extrabold text-primary-600 mb-2">1000+</div>
                <div class="text-gray-600 dark:text-gray-400">Active Coders</div>
            </div>
            <div class="transition-transform duration-300 hover:scale-110">
                <div class="stat-animate text-4xl font-extrabold text-success-600 mb-2">2000+</div>
                <div class="text-gray-600 dark:text-gray-400">Coding Problems</div>
            </div>
            <div class="transition-transform duration-300 hover:scale-110">
                <div class="stat-animate text-4xl font-extrabold text-black dark:text-white mb-2">10000+</div>
                <div class="text-gray-600 dark:text-gray-400">Submissions</div>
            </div>
            <div class="transition-transform duration-300 hover:scale-110">
                <div class="stat-animate text-4xl font-extrabold text-purple-600 mb-2">100+</div>
                <div class="text-gray-600 dark:text-gray-400">Contests</div>
            </div>
            <div class="transition-transform duration-300 hover:scale-110">
                <div class="stat-animate text-4xl font-extrabold text-yellow-500 mb-2">100+</div>
                <div class="text-gray-600 dark:text-gray-400">Vouchers Redeemed</div>
            </div>
        </div>
    </div>
</div>

<!-- Features Section with Animation -->
<div class="bg-gray-50 dark:bg-gray-900 py-24">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="text-center mb-16 animate-fade-in-up delay-700">
            <h2 class="text-4xl font-extrabold text-gray-900 dark:text-white mb-4">
                Why Choose CompileMate?
            </h2>
            <p class="text-2xl text-gray-600 dark:text-gray-400 max-w-3xl mx-auto">
                Experience the perfect blend of competitive programming and gamification with real-world rewards.
            </p>
        </div>
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-10">
            <!-- Feature Card Example -->
            <div class="bg-white dark:bg-gray-800 rounded-2xl p-8 shadow-xl hover:shadow-2xl transition-all transform hover:-translate-y-2 animate-fade-in-up delay-800">
                <div class="w-16 h-16 bg-primary-100 dark:bg-primary-900 rounded-xl flex items-center justify-center mb-6 text-3xl">🪙</div>
                <h3 class="text-2xl font-bold text-gray-900 dark:text-white mb-2">Earn MateCoins</h3>
                <p class="text-gray-600 dark:text-gray-400 text-lg">
                    Solve problems, complete streaks, and participate in contests to earn MateCoins that can be redeemed for real rewards.
                </p>
            </div>
            <div class="bg-white dark:bg-gray-800 rounded-2xl p-8 shadow-xl hover:shadow-2xl transition-all transform hover:-translate-y-2 animate-fade-in-up delay-900">
                <div class="w-16 h-16 bg-success-100 dark:bg-success-900 rounded-xl flex items-center justify-center mb-6 text-3xl">🏆</div>
                <h3 class="text-2xl font-bold text-gray-900 dark:text-white mb-2">Competitive Contests</h3>
                <p class="text-gray-600 dark:text-gray-400 text-lg">
                    Join weekly and monthly contests with real-time leaderboards, problem locking, and contest ratings.
                </p>
            </div>
            <div class="bg-white dark:bg-gray-800 rounded-2xl p-8 shadow-xl hover:shadow-2xl transition-all transform hover:-translate-y-2 animate-fade-in-up delay-1000">
                <div class="w-16 h-16 bg-warning-100 dark:bg-warning-900 rounded-xl flex items-center justify-center mb-6 text-3xl">💻</div>
                <h3 class="text-2xl font-bold text-gray-900 dark:text-white mb-2">Advanced Editor</h3>
                <p class="text-gray-600 dark:text-gray-400 text-lg">
                    Code with syntax highlighting, multiple language support, and real-time execution with instant feedback.
                </p>
            </div>
            <div class="bg-white dark:bg-gray-800 rounded-2xl p-8 shadow-xl hover:shadow-2xl transition-all transform hover:-translate-y-2 animate-fade-in-up delay-1100">
                <div class="w-16 h-16 bg-purple-100 dark:bg-purple-900 rounded-xl flex items-center justify-center mb-6 text-3xl">🎁</div>
                <h3 class="text-2xl font-bold text-gray-900 dark:text-white mb-2">Real Rewards</h3>
                <p class="text-gray-600 dark:text-gray-400 text-lg">
                    Redeem your MateCoins for vouchers from Zomato, Swiggy, Ola, Uber, and other popular services.
                </p>
            </div>
            <div class="bg-white dark:bg-gray-800 rounded-2xl p-8 shadow-xl hover:shadow-2xl transition-all transform hover:-translate-y-2 animate-fade-in-up delay-1200">
                <div class="w-16 h-16 bg-indigo-100 dark:bg-indigo-900 rounded-xl flex items-center justify-center mb-6 text-3xl">📊</div>
                <h3 class="text-2xl font-bold text-gray-900 dark:text-white mb-2">Progress Tracking</h3>
                <p class="text-gray-600 dark:text-gray-400 text-lg">
                    Track your progress with detailed analytics, streak counters, and personalized recommendations.
                </p>
            </div>
            <div class="bg-white dark:bg-gray-800 rounded-2xl p-8 shadow-xl hover:shadow-2xl transition-all transform hover:-translate-y-2 animate-fade-in-up delay-1300">
                <div class="w-16 h-16 bg-pink-100 dark:bg-pink-900 rounded-xl flex items-center justify-center mb-6 text-3xl">🤝</div>
                <h3 class="text-2xl font-bold text-gray-900 dark:text-white mb-2">Community</h3>
                <p class="text-gray-600 dark:text-gray-400 text-lg">
                    Join discussions, share solutions, and learn from other coders in our vibrant community.
                </p>
            </div>
        </div>
    </div>
</div>

<!-- Recent Problems Section with Animation -->
<div class="bg-white dark:bg-gray-800 py-24 animate-fade-in-up delay-1400">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="text-center mb-16">
            <h2 class="text-4xl font-extrabold text-gray-900 dark:text-white mb-4">
                Latest Problems
            </h2>
            <p class="text-2xl text-gray-600 dark:text-gray-400">
                Start with our newest challenges and build your skills progressively.
            </p>
        </div>
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
            {% for problem in recent_problems %}
            <div class="bg-gray-50 dark:bg-gray-700 rounded-2xl p-8 hover:shadow-2xl transition-all transform hover:-translate-y-2 animate-fade-in-up delay-1500">
                <div class="flex items-center justify-between mb-3">
                    <h3 class="text-xl font-bold text-gray-900 dark:text-white">
                        <a href="{% url 'problems:problem_detail' problem.slug %}" class="hover:text-primary-600 dark:hover:text-primary-400">
                            {{ problem.title }}
                        </a>
                    </h3>
                    <span class="px-3 py-1 text-sm font-semibold rounded-full
                        {% if problem.difficulty == 'easy' %}bg-success-100 text-success-800
                        {% elif problem.difficulty == 'medium' %}bg-warning-100 text-warning-800
                        {% else %}bg-danger-100 text-danger-800{% endif %}">
                        {{ problem.difficulty|title }}
                    </span>
                </div>
                <div class="flex items-center justify-between text-base text-gray-600 dark:text-gray-400 mb-3">
                    <span>{{ problem.total_submissions }} submissions</span>
                    <span>{{ problem.acceptance_rate|floatformat:1 }}% acceptance</span>
                </div>
                <div class="flex flex-wrap gap-2 mb-4">
                    {% for tag in problem.tags.all|slice:":3" %}
                    <span class="px-3 py-1 text-sm bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-300 rounded">
                        {{ tag.name }}
                    </span>
                    {% endfor %}
                </div>
                <div class="flex items-center justify-between">
                    <span class="text-yellow-600 font-bold">{{ problem.coin_reward }} 🪙</span>
                    <a href="{% url 'problems:problem_solve' problem.slug %}" class="text-primary-600 hover:text-primary-700 font-bold">
                        Solve →
                    </a>
                </div>
            </div>
            {% endfor %}
        </div>
        <div class="text-center mt-8">
            <a href="{% url 'problems:problem_list' %}" class="inline-block bg-gradient-to-r from-primary-600 to-purple-600 text-white px-8 py-4 rounded-xl font-bold text-xl shadow-lg hover:scale-105 transition-all duration-200 animate-fade-in-up delay-1600">
                View All Problems
            </a>
        </div>
    </div>
</div>

<!-- Custom Animations -->
<style>
@keyframes fade-in-up {
  0% { opacity: 0; transform: translateY(40px); }
  100% { opacity: 1; transform: translateY(0); }
}
.animate-fade-in-up { animation: fade-in-up 1s cubic-bezier(0.4,0,0.2,1) both; }
.animate-fade-in-up.delay-200 { animation-delay: 0.2s; }
.animate-fade-in-up.delay-300 { animation-delay: 0.3s; }
.animate-fade-in-up.delay-500 { animation-delay: 0.5s; }
.animate-fade-in-up.delay-700 { animation-delay: 0.7s; }
.animate-fade-in-up.delay-800 { animation-delay: 0.8s; }
.animate-fade-in-up.delay-900 { animation-delay: 0.9s; }
.animate-fade-in-up.delay-1000 { animation-delay: 1s; }
.animate-fade-in-up.delay-1100 { animation-delay: 1.1s; }
.animate-fade-in-up.delay-1200 { animation-delay: 1.2s; }
.animate-fade-in-up.delay-1300 { animation-delay: 1.3s; }
.animate-fade-in-up.delay-1400 { animation-delay: 1.4s; }
.animate-fade-in-up.delay-1500 { animation-delay: 1.5s; }
.animate-fade-in-up.delay-1600 { animation-delay: 1.6s; }

@keyframes float-slow { 0%,100%{transform:translateY(0);} 50%{transform:translateY(-20px);} }
@keyframes float-medium { 0%,100%{transform:translateY(0);} 50%{transform:translateY(-40px);} }
@keyframes float-fast { 0%,100%{transform:translateY(0);} 50%{transform:translateY(-60px);} }
.animate-float-slow { animation: float-slow 4s ease-in-out infinite; }
.animate-float-medium { animation: float-medium 3s ease-in-out infinite; }
.animate-float-fast { animation: float-fast 2s ease-in-out infinite; }

@keyframes stat-bounce-in {
  0% { opacity: 0; transform: scale(0.7) translateY(40px); }
  60% { opacity: 1; transform: scale(1.15) translateY(-10px); }
  80% { transform: scale(0.95) translateY(5px); }
  100% { opacity: 1; transform: scale(1) translateY(0); }
}
.stat-animate {
  animation: stat-bounce-in 0.9s cubic-bezier(0.4,0,0.2,1) both;
  transition: box-shadow 0.2s, transform 0.2s;
}
.stat-animate:hover {
  animation: stat-vibe 0.4s infinite alternate cubic-bezier(0.4,0,0.2,1);
  box-shadow: 0 4px 24px 0 rgba(59,130,246,0.10);
}
@keyframes stat-vibe {
  0% { transform: scale(1) rotate(-2deg); }
  25% { transform: scale(1.05) rotate(2deg); }
  50% { transform: scale(0.98) rotate(-1deg); }
  75% { transform: scale(1.03) rotate(1deg); }
  100% { transform: scale(1) rotate(0deg); }
}
</style>
<script>
// Animated counters for stats
function animateCounter(id, end) {
    let el = document.getElementById(id);
    if (!el) return; // Guard: only run if element exists
    let start = 0;
    let duration = 1200;
    let step = Math.ceil(end / (duration / 16));
    function update() {
        start += step;
        if (start >= end) { el.textContent = end + '+'; return; }
        el.textContent = start + '+';
        requestAnimationFrame(update);
    }
    update();
}
document.addEventListener('DOMContentLoaded', function() {
    animateCounter('counter-users', {{ total_users|floatformat:"0" }});
    animateCounter('counter-problems', {{ total_problems|floatformat:"0" }});
    animateCounter('counter-submissions', {{ total_submissions|floatformat:"0" }});
    animateCounter('counter-contests', {{ total_contests|floatformat:"0" }});
});
</script>
{% endblock %} 