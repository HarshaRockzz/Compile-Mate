{% extends 'base.html' %}
{% block title %}Request Code Review - CompileMate{% endblock %}
{% block content %}
<div class="min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-cyan-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 py-8">
    <div class="max-w-4xl mx-auto px-4">
        <h1 class="text-4xl font-extrabold text-gray-900 dark:text-white mb-8">Request Code Review</h1>
        
        <form method="POST" class="bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-8">
            {% csrf_token %}
            <div class="mb-4">
                <label class="block text-sm font-semibold text-gray-900 dark:text-white mb-2">Review Title</label>
                <input type="text" name="title" required placeholder="e.g., Need help optimizing my solution" class="w-full px-4 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 rounded-lg">
            </div>
            <div class="mb-4">
                <label class="block text-sm font-semibold text-gray-900 dark:text-white mb-2">Description</label>
                <textarea name="description" rows="4" required placeholder="What specific feedback are you looking for?" class="w-full px-4 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 rounded-lg"></textarea>
            </div>
            <div class="mb-6">
                <label class="block text-sm font-semibold text-gray-900 dark:text-white mb-2">Select Submission</label>
                <select name="submission_id" required class="w-full px-4 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 rounded-lg">
                    <option value="">Choose a submission...</option>
                    {% for submission in submissions %}
                    <option value="{{ submission.id }}">{{ submission.problem.title }} - {{ submission.language }} - {{ submission.submitted_at|date:"M d, Y" }}</option>
                    {% endfor %}
                </select>
                {% if not submissions %}
                <p class="text-sm text-yellow-600 dark:text-yellow-400 mt-2">No accepted submissions found. Solve some problems first!</p>
                {% endif %}
            </div>
            <div class="flex gap-4">
                <a href="{% url 'code_reviews:list' %}" class="flex-1 text-center bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 px-6 py-3 rounded-xl font-semibold hover:bg-gray-300 transition">Cancel</a>
                <button type="submit" class="flex-1 bg-gradient-to-r from-blue-600 to-cyan-600 text-white px-6 py-3 rounded-xl font-semibold hover:from-blue-700 hover:to-cyan-700 transition">Request Review (50 coins)</button>
            </div>
        </form>
    </div>
</div>
{% endblock %}
