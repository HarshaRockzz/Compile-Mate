{% extends 'base.html' %}

{% block title %}Marketplace - CompileMate{% endblock %}

{% block content %}
<div class="min-h-screen bg-gray-50 dark:bg-gray-900">
    <!-- Header -->
    <div class="bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6">
            <div class="flex items-center justify-between">
                <div>
                    <h1 class="text-2xl font-bold text-gray-900 dark:text-white">Rewards Marketplace</h1>
                    <p class="text-gray-600 dark:text-gray-400">Redeem your MateCoins for amazing rewards</p>
                </div>
                <div class="text-right">
                    <div class="text-2xl font-bold text-yellow-600">{{ user.coins }} ü™ô</div>
                    <div class="text-sm text-gray-600 dark:text-gray-400">Your Balance</div>
                </div>
            </div>
        </div>
    </div>

    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <!-- Categories -->
        <div class="mb-8">
            <div class="flex flex-wrap gap-4">
                <button class="category-btn active" data-category="all">
                    <span class="text-lg">üéÅ</span>
                    <span>All Rewards</span>
                </button>
                <button class="category-btn" data-category="food">
                    <span class="text-lg">üçï</span>
                    <span>Food & Dining</span>
                </button>
                <button class="category-btn" data-category="transport">
                    <span class="text-lg">üöó</span>
                    <span>Transport</span>
                </button>
                <button class="category-btn" data-category="shopping">
                    <span class="text-lg">üõçÔ∏è</span>
                    <span>Shopping</span>
                </button>
                <button class="category-btn" data-category="entertainment">
                    <span class="text-lg">üé¨</span>
                    <span>Entertainment</span>
                </button>
            </div>
        </div>

        <!-- Search and Filter -->
        <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6 mb-8">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Search</label>
                    <input type="text" id="search-input" placeholder="Search rewards..." 
                           class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:text-white">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Sort by</label>
                    <select id="sort-select" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:text-white">
                        <option value="popular">Most Popular</option>
                        <option value="price-low">Price: Low to High</option>
                        <option value="price-high">Price: High to Low</option>
                        <option value="newest">Newest</option>
                    </select>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Price Range</label>
                    <select id="price-filter" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:text-white">
                        <option value="all">All Prices</option>
                        <option value="0-100">0 - 100 ü™ô</option>
                        <option value="100-500">100 - 500 ü™ô</option>
                        <option value="500-1000">500 - 1000 ü™ô</option>
                        <option value="1000+">1000+ ü™ô</option>
                    </select>
                </div>
            </div>
        </div>

        <!-- Rewards Grid -->
        <div id="rewards-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
            <!-- Sample rewards - replace with dynamic data -->
            <div class="reward-card" data-category="food" data-price="150" data-company-url="https://www.zomato.com">
                <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden hover:shadow-lg transition-shadow">
                    <div class="p-6">
                        <div class="flex items-center justify-between mb-4">
                            <div class="w-12 h-12 bg-red-100 dark:bg-red-900 rounded-lg flex items-center justify-center">
                                <span class="text-2xl">üçï</span>
                            </div>
                            <span class="text-sm font-medium text-gray-500 dark:text-gray-400">Food</span>
                        </div>
                        <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-2">Zomato Gift Card</h3>
                        <p class="text-gray-600 dark:text-gray-400 text-sm mb-4">‚Çπ100 worth of food delivery credit</p>
                        <div class="flex items-center justify-between">
                            <span class="text-xl font-bold text-yellow-600">150 ü™ô</span>
                            <button class="redeem-btn bg-primary-600 hover:bg-primary-700 text-white px-4 py-2 rounded font-medium transition-colors">
                                Redeem Now
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="reward-card" data-category="transport" data-price="200" data-company-url="https://www.olacabs.com">
                <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden hover:shadow-lg transition-shadow">
                    <div class="p-6">
                        <div class="flex items-center justify-between mb-4">
                            <div class="w-12 h-12 bg-blue-100 dark:bg-blue-900 rounded-lg flex items-center justify-center">
                                <span class="text-2xl">üöó</span>
                            </div>
                            <span class="text-sm font-medium text-gray-500 dark:text-gray-400">Transport</span>
                        </div>
                        <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-2">Ola Ride Credit</h3>
                        <p class="text-gray-600 dark:text-gray-400 text-sm mb-4">‚Çπ150 worth of ride credit</p>
                        <div class="flex items-center justify-between">
                            <span class="text-xl font-bold text-yellow-600">200 ü™ô</span>
                            <button class="redeem-btn bg-primary-600 hover:bg-primary-700 text-white px-4 py-2 rounded font-medium transition-colors">
                                Redeem Now
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="reward-card" data-category="shopping" data-price="300" data-company-url="https://www.amazon.in">
                <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden hover:shadow-lg transition-shadow">
                    <div class="p-6">
                        <div class="flex items-center justify-between mb-4">
                            <div class="w-12 h-12 bg-green-100 dark:bg-green-900 rounded-lg flex items-center justify-center">
                                <span class="text-2xl">üõçÔ∏è</span>
                            </div>
                            <span class="text-sm font-medium text-gray-500 dark:text-gray-400">Shopping</span>
                        </div>
                        <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-2">Amazon Gift Card</h3>
                        <p class="text-gray-600 dark:text-gray-400 text-sm mb-4">‚Çπ200 worth of shopping credit</p>
                        <div class="flex items-center justify-between">
                            <span class="text-xl font-bold text-yellow-600">300 ü™ô</span>
                            <button class="redeem-btn bg-primary-600 hover:bg-primary-700 text-white px-4 py-2 rounded font-medium transition-colors">
                                Redeem Now
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="reward-card" data-category="entertainment" data-price="250" data-company-url="https://www.netflix.com">
                <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden hover:shadow-lg transition-shadow">
                    <div class="p-6">
                        <div class="flex items-center justify-between mb-4">
                            <div class="w-12 h-12 bg-purple-100 dark:bg-purple-900 rounded-lg flex items-center justify-center">
                                <span class="text-2xl">üé¨</span>
                            </div>
                            <span class="text-sm font-medium text-gray-500 dark:text-gray-400">Entertainment</span>
                        </div>
                        <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-2">Netflix Gift Card</h3>
                        <p class="text-gray-600 dark:text-gray-400 text-sm mb-4">1 month subscription</p>
                        <div class="flex items-center justify-between">
                            <span class="text-xl font-bold text-yellow-600">250 ü™ô</span>
                            <button class="redeem-btn bg-primary-600 hover:bg-primary-700 text-white px-4 py-2 rounded font-medium transition-colors">
                                Redeem Now
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="reward-card" data-category="food" data-price="180" data-company-url="https://www.swiggy.com">
                <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden hover:shadow-lg transition-shadow">
                    <div class="p-6">
                        <div class="flex items-center justify-between mb-4">
                            <div class="w-12 h-12 bg-orange-100 dark:bg-orange-900 rounded-lg flex items-center justify-center">
                                <span class="text-2xl">üçî</span>
                            </div>
                            <span class="text-sm font-medium text-gray-500 dark:text-gray-400">Food</span>
                        </div>
                        <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-2">Swiggy Gift Card</h3>
                        <p class="text-gray-600 dark:text-gray-400 text-sm mb-4">‚Çπ120 worth of food delivery credit</p>
                        <div class="flex items-center justify-between">
                            <span class="text-xl font-bold text-yellow-600">180 ü™ô</span>
                            <button class="redeem-btn bg-primary-600 hover:bg-primary-700 text-white px-4 py-2 rounded font-medium transition-colors">
                                Redeem Now
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="reward-card" data-category="transport" data-price="220" data-company-url="https://www.uber.com">
                <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden hover:shadow-lg transition-shadow">
                    <div class="p-6">
                        <div class="flex items-center justify-between mb-4">
                            <div class="w-12 h-12 bg-indigo-100 dark:bg-indigo-900 rounded-lg flex items-center justify-center">
                                <span class="text-2xl">üöï</span>
                            </div>
                            <span class="text-sm font-medium text-gray-500 dark:text-gray-400">Transport</span>
                        </div>
                        <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-2">Uber Ride Credit</h3>
                        <p class="text-gray-600 dark:text-gray-400 text-sm mb-4">‚Çπ180 worth of ride credit</p>
                        <div class="flex items-center justify-between">
                            <span class="text-xl font-bold text-yellow-600">220 ü™ô</span>
                            <button class="redeem-btn bg-primary-600 hover:bg-primary-700 text-white px-4 py-2 rounded font-medium transition-colors">
                                Redeem Now
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Additional rewards -->
            <div class="reward-card" data-category="shopping" data-price="400" data-company-url="https://www.flipkart.com">
                <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden hover:shadow-lg transition-shadow">
                    <div class="p-6">
                        <div class="flex items-center justify-between mb-4">
                            <div class="w-12 h-12 bg-yellow-100 dark:bg-yellow-900 rounded-lg flex items-center justify-center">
                                <span class="text-2xl">üì±</span>
                            </div>
                            <span class="text-sm font-medium text-gray-500 dark:text-gray-400">Shopping</span>
                        </div>
                        <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-2">Flipkart Gift Card</h3>
                        <p class="text-gray-600 dark:text-gray-400 text-sm mb-4">‚Çπ300 worth of shopping credit</p>
                        <div class="flex items-center justify-between">
                            <span class="text-xl font-bold text-yellow-600">400 ü™ô</span>
                            <button class="redeem-btn bg-primary-600 hover:bg-primary-700 text-white px-4 py-2 rounded font-medium transition-colors">
                                Redeem Now
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="reward-card" data-category="entertainment" data-price="280" data-company-url="https://www.hotstar.com">
                <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden hover:shadow-lg transition-shadow">
                    <div class="p-6">
                        <div class="flex items-center justify-between mb-4">
                            <div class="w-12 h-12 bg-blue-100 dark:bg-blue-900 rounded-lg flex items-center justify-center">
                                <span class="text-2xl">üì∫</span>
                            </div>
                            <span class="text-sm font-medium text-gray-500 dark:text-gray-400">Entertainment</span>
                        </div>
                        <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-2">Disney+ Hotstar</h3>
                        <p class="text-gray-600 dark:text-gray-400 text-sm mb-4">3 months premium subscription</p>
                        <div class="flex items-center justify-between">
                            <span class="text-xl font-bold text-yellow-600">280 ü™ô</span>
                            <button class="redeem-btn bg-primary-600 hover:bg-primary-700 text-white px-4 py-2 rounded font-medium transition-colors">
                                Redeem Now
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="reward-card" data-category="food" data-price="120" data-company-url="https://www.dominos.co.in">
                <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden hover:shadow-lg transition-shadow">
                    <div class="p-6">
                        <div class="flex items-center justify-between mb-4">
                            <div class="w-12 h-12 bg-red-100 dark:bg-red-900 rounded-lg flex items-center justify-center">
                                <span class="text-2xl">üçï</span>
                            </div>
                            <span class="text-sm font-medium text-gray-500 dark:text-gray-400">Food</span>
                        </div>
                        <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-2">Domino's Pizza</h3>
                        <p class="text-gray-600 dark:text-gray-400 text-sm mb-4">Free medium pizza with any order</p>
                        <div class="flex items-center justify-between">
                            <span class="text-xl font-bold text-yellow-600">120 ü™ô</span>
                            <button class="redeem-btn bg-primary-600 hover:bg-primary-700 text-white px-4 py-2 rounded font-medium transition-colors">
                                Redeem Now
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="reward-card" data-category="transport" data-price="150" data-company-url="https://www.rapido.bike">
                <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden hover:shadow-lg transition-shadow">
                    <div class="p-6">
                        <div class="flex items-center justify-between mb-4">
                            <div class="w-12 h-12 bg-green-100 dark:bg-green-900 rounded-lg flex items-center justify-center">
                                <span class="text-2xl">üèçÔ∏è</span>
                            </div>
                            <span class="text-sm font-medium text-gray-500 dark:text-gray-400">Transport</span>
                        </div>
                        <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-2">Rapido Bike Taxi</h3>
                        <p class="text-gray-600 dark:text-gray-400 text-sm mb-4">‚Çπ100 worth of bike taxi credit</p>
                        <div class="flex items-center justify-between">
                            <span class="text-xl font-bold text-yellow-600">150 ü™ô</span>
                            <button class="redeem-btn bg-primary-600 hover:bg-primary-700 text-white px-4 py-2 rounded font-medium transition-colors">
                                Redeem Now
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Load More Button -->
        <div class="text-center mt-12">
            <button id="load-more-btn" class="bg-gray-600 hover:bg-gray-700 text-white px-8 py-3 rounded-lg font-semibold transition-colors">
                Load More Rewards
            </button>
        </div>
    </div>
</div>

<!-- Redeem Modal -->
<div id="redeem-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50">
    <div class="flex items-center justify-center min-h-screen p-4">
        <div class="bg-white dark:bg-gray-800 rounded-lg p-8 max-w-md w-full">
            <div class="text-center mb-6">
                <div class="w-16 h-16 bg-primary-100 dark:bg-primary-900 rounded-full flex items-center justify-center mx-auto mb-4">
                    <span class="text-3xl">üéÅ</span>
                </div>
                <h3 class="text-xl font-bold text-gray-900 dark:text-white mb-2">Confirm Redemption</h3>
                <p class="text-gray-600 dark:text-gray-400">Are you sure you want to redeem this reward?</p>
            </div>
            
            <div class="bg-gray-50 dark:bg-gray-700 rounded-lg p-4 mb-6">
                <div class="flex items-center justify-between">
                    <div>
                        <h4 class="font-semibold text-gray-900 dark:text-white" id="modal-reward-name">Reward Name</h4>
                        <p class="text-sm text-gray-600 dark:text-gray-400" id="modal-reward-description">Reward description</p>
                    </div>
                    <div class="text-right">
                        <div class="text-lg font-bold text-yellow-600" id="modal-reward-price">0 ü™ô</div>
                        <div class="text-sm text-gray-600 dark:text-gray-400">Cost</div>
                    </div>
                </div>
            </div>
            
            <div class="flex space-x-3">
                <button onclick="closeRedeemModal()" class="flex-1 bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded font-medium transition-colors">
                    Cancel
                </button>
                <button onclick="confirmRedeem()" class="flex-1 bg-primary-600 hover:bg-primary-700 text-white px-4 py-2 rounded font-medium transition-colors">
                    Confirm Redemption
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Success Modal -->
<div id="success-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50">
    <div class="flex items-center justify-center min-h-screen p-4">
        <div class="bg-white dark:bg-gray-800 rounded-lg p-8 max-w-md w-full text-center">
            <div class="text-6xl mb-4">üéâ</div>
            <h3 class="text-2xl font-bold text-gray-900 dark:text-white mb-2">Redemption Successful!</h3>
            <p class="text-gray-600 dark:text-gray-400 mb-4">Your reward has been redeemed successfully.</p>
            <div class="bg-gray-50 dark:bg-gray-700 rounded-lg p-4 mb-6">
                <div class="text-sm text-gray-600 dark:text-gray-400 mb-2">Voucher Code</div>
                <div class="text-lg font-mono font-bold text-primary-600" id="voucher-code">ABC123XYZ</div>
            </div>
            <p class="text-sm text-gray-600 dark:text-gray-400 mb-6">The voucher code has been sent to your email and is also available in your profile.</p>
            <button onclick="closeSuccessModal()" class="bg-primary-600 hover:bg-primary-700 text-white px-8 py-3 rounded-lg font-semibold transition-colors">
                Continue Shopping
            </button>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_scripts %}
<script>
    let selectedReward = null;
    
    // Category filtering
    document.querySelectorAll('.category-btn').forEach(btn => {
        btn.addEventListener('click', function() {
            // Remove active class from all buttons
            document.querySelectorAll('.category-btn').forEach(b => b.classList.remove('active'));
            // Add active class to clicked button
            this.classList.add('active');
            
            const category = this.dataset.category;
            filterRewards();
        });
    });
    
    // Search functionality
    document.getElementById('search-input').addEventListener('input', filterRewards);
    
    // Sort functionality
    document.getElementById('sort-select').addEventListener('change', filterRewards);
    
    // Price filter
    document.getElementById('price-filter').addEventListener('change', filterRewards);
    
    function filterRewards() {
        const searchTerm = document.getElementById('search-input').value.toLowerCase();
        const sortBy = document.getElementById('sort-select').value;
        const priceFilter = document.getElementById('price-filter').value;
        const activeCategory = document.querySelector('.category-btn.active').dataset.category;
        
        const rewards = document.querySelectorAll('.reward-card');
        
        rewards.forEach(reward => {
            const name = reward.querySelector('h3').textContent.toLowerCase();
            const category = reward.dataset.category;
            const price = parseInt(reward.dataset.price);
            
            let show = true;
            
            // Category filter
            if (activeCategory !== 'all' && category !== activeCategory) {
                show = false;
            }
            
            // Search filter
            if (searchTerm && !name.includes(searchTerm)) {
                show = false;
            }
            
            // Price filter
            if (priceFilter !== 'all') {
                const [min, max] = priceFilter.split('-').map(p => p === '+' ? Infinity : parseInt(p));
                if (price < min || (max !== Infinity && price > max)) {
                    show = false;
                }
            }
            
            reward.style.display = show ? 'block' : 'none';
        });
        
        // Sort rewards
        const rewardsArray = Array.from(rewards).filter(r => r.style.display !== 'none');
        const rewardsContainer = document.getElementById('rewards-grid');
        
        rewardsArray.sort((a, b) => {
            const priceA = parseInt(a.dataset.price);
            const priceB = parseInt(b.dataset.price);
            
            switch (sortBy) {
                case 'price-low':
                    return priceA - priceB;
                case 'price-high':
                    return priceB - priceA;
                case 'popular':
                    return Math.random() - 0.5; // Random for demo
                default:
                    return 0;
            }
        });
        
        // Reorder in DOM
        rewardsArray.forEach(reward => {
            rewardsContainer.appendChild(reward);
        });
    }
    
    // Redeem button functionality
    document.addEventListener('click', function(e) {
        if (e.target.classList.contains('redeem-btn')) {
            const rewardCard = e.target.closest('.reward-card');
            const name = rewardCard.querySelector('h3').textContent;
            const price = parseInt(rewardCard.dataset.price);
            const companyUrl = rewardCard.dataset.companyUrl;
            
            const userCoins = {{ user.coins }};
            
            if (userCoins < price) {
                showToast('Insufficient MateCoins! You need ' + price + ' ü™ô but have ' + userCoins + ' ü™ô', 'error');
                return;
            }
            
            // Show confirmation dialog
            if (confirm(`Redeem ${name} for ${price} ü™ô?\n\nYou will be redirected to ${name}'s website to complete your purchase.`)) {
                // Deduct coins (in a real app, this would be an API call)
                const coinDisplay = document.querySelector('.text-2xl.font-bold.text-yellow-600');
                const currentCoins = parseInt(coinDisplay.textContent);
                coinDisplay.textContent = (currentCoins - price) + ' ü™ô';
                
                // Show success message
                showToast(`Successfully redeemed ${name}! Redirecting to ${name}...`, 'success');
                
                // Open company website in new tab
                if (companyUrl) {
                    window.open(companyUrl, '_blank');
                }
            }
        }
    });
    
    function showRedeemModal() {
        if (!selectedReward) return;
        
        const userCoins = {{ user.coins }};
        
        if (userCoins < selectedReward.priceValue) {
            showToast('Insufficient MateCoins! You need ' + selectedReward.priceValue + ' ü™ô but have ' + userCoins + ' ü™ô', 'error');
            return;
        }
        
        document.getElementById('modal-reward-name').textContent = selectedReward.name;
        document.getElementById('modal-reward-description').textContent = selectedReward.description;
        document.getElementById('modal-reward-price').textContent = selectedReward.price;
        
        document.getElementById('redeem-modal').classList.remove('hidden');
    }
    
    function closeRedeemModal() {
        document.getElementById('redeem-modal').classList.add('hidden');
        selectedReward = null;
    }
    
    function closeSuccessModal() {
        document.getElementById('success-modal').classList.add('hidden');
    }
    
    // Load more functionality
    document.getElementById('load-more-btn').addEventListener('click', function() {
        // Simulate loading more rewards
        this.textContent = 'Loading...';
        this.disabled = true;
        
        setTimeout(() => {
            this.textContent = 'Load More Rewards';
            this.disabled = false;
            showToast('More rewards loaded!', 'success');
        }, 2000);
    });

    // Toast notification function
    function showToast(message, type = 'info') {
        // Create toast element
        const toast = document.createElement('div');
        toast.className = `fixed top-4 right-4 z-50 px-6 py-3 rounded-lg text-white font-medium transition-all duration-300 transform translate-x-full`;
        
        // Set background color based on type
        switch(type) {
            case 'success':
                toast.className += ' bg-green-600';
                break;
            case 'error':
                toast.className += ' bg-red-600';
                break;
            case 'warning':
                toast.className += ' bg-yellow-600';
                break;
            default:
                toast.className += ' bg-blue-600';
        }
        
        toast.textContent = message;
        document.body.appendChild(toast);
        
        // Animate in
        setTimeout(() => {
            toast.classList.remove('translate-x-full');
        }, 100);
        
        // Remove after 3 seconds
        setTimeout(() => {
            toast.classList.add('translate-x-full');
            setTimeout(() => {
                document.body.removeChild(toast);
            }, 300);
        }, 3000);
    }
</script>

<style>
    .category-btn {
        @apply flex items-center space-x-2 px-4 py-2 rounded-lg font-medium transition-colors;
        @apply bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300;
    }
    
    .category-btn:hover {
        @apply bg-gray-200 dark:bg-gray-600;
    }
    
    .category-btn.active {
        @apply bg-primary-600 text-white;
    }
    
    .reward-card {
        transition: transform 0.2s ease-in-out;
    }
    
    .reward-card:hover {
        transform: translateY(-2px);
    }
</style>
{% endblock %} 